<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Jenkins插件版本太旧的更新方法</title>
      <link href="/2019/11/12/technology/learningExperience/Linux/Jenkins/Jenkins%E6%8F%92%E4%BB%B6%E7%89%88%E6%9C%AC%E5%A4%AA%E6%97%A7%E7%9A%84%E6%9B%B4%E6%96%B0%E6%96%B9%E6%B3%95/"/>
      <url>/2019/11/12/technology/learningExperience/Linux/Jenkins/Jenkins%E6%8F%92%E4%BB%B6%E7%89%88%E6%9C%AC%E5%A4%AA%E6%97%A7%E7%9A%84%E6%9B%B4%E6%96%B0%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="Jenkins插件版本太旧的更新方法"><a href="#Jenkins插件版本太旧的更新方法" class="headerlink" title="Jenkins插件版本太旧的更新方法"></a>Jenkins插件版本太旧的更新方法</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><pre><code>Jenkins的插件好多都是互相依赖的，如果有的插件版本太低，而另一个插件就会导致用不了，就会出现下面的情况：</code></pre><p><img src="https://mjava.top/img/20191108102617.png" alt="jenkins插件管理界面"></p><p>Durable Task Plugin version 1.29 is older than required. To fix, install version 1.33 or later.</p><h2 id="查看本地已安装版本"><a href="#查看本地已安装版本" class="headerlink" title="查看本地已安装版本"></a>查看本地已安装版本</h2><p>可以看到，本地安装的版本和刚才提示的一样，是1.29版本的，刚才提示说太旧了，要更新到1.33版本。</p><p><img src="https://mjava.top/img/20191108100855.png" alt="jenkins插件管理界面"></p><h2 id="搜索插件"><a href="#搜索插件" class="headerlink" title="搜索插件"></a>搜索插件</h2><p>当你理所应当的去这个界面准备搜索这个插件并更新时。。。。你傻了，，怎么搜不到？？？WTF</p><p><img src="https://mjava.top/img/20191108102907.png" alt="jenkins插件管理界面"></p><p>不要慌，天无绝人之路，这里找不到，可以去另外的地方找。浏览器打开这个网站</p><p><a href="https://plugins.jenkins.io/" target="_blank" rel="noopener">Jenkins插件下载</a></p><ul><li>进入后在输入框里输入你刚才要下载的插件:</li></ul><p><img src="https://mjava.top/img/20191108101610.png" alt="jenkins插件下载"></p><ul><li>选择对应的插件<br><img src="https://mjava.top/img/20191108101748.png" alt="jenkins插件下载"></li></ul><ul><li>然后点击右上角<br><img src="https://mjava.top/img/20191108101807.png" alt="jenkins插件下载"></li></ul><ul><li>下载刚才提示的1.33版本<br><img src="https://mjava.top/img/20191108101832.png" alt="jenkins插件下载"></li></ul><ul><li>下载完成后是一个hpi文件<br><img src="https://mjava.top/img/20191108102109.png" alt="jenkins插件下载"></li></ul><h2 id="导入插件"><a href="#导入插件" class="headerlink" title="导入插件"></a>导入插件</h2><ul><li><p>到插件管理界面，找到Upload Plugin<br><img src="https://mjava.top/img/20191108102152.png" alt="jenkins插件下载"></p></li><li><p>然后选择刚才下载的插件，点击导入<br><img src="https://mjava.top/img/20191108102223.png" alt="jenkins插件下载"></p></li><li><p>可以看到插件正在导入<br><img src="https://mjava.top/img/20191108102240.png" alt="jenkins插件下载"></p></li><li><p>导入完成后，重启Jenkins就OK了<br><img src="https://mjava.top/img/20191108102254.png" alt="jenkins插件下载"></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> technology </category>
          
          <category> learningExperience </category>
          
          <category> Linux </category>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins教程-Docker+GitLab持续部署持续集成</title>
      <link href="/2019/11/12/technology/learningExperience/Linux/Jenkins/Jenkins%E6%95%99%E7%A8%8B-Docker+GitLab%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/"/>
      <url>/2019/11/12/technology/learningExperience/Linux/Jenkins/Jenkins%E6%95%99%E7%A8%8B-Docker+GitLab%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/</url>
      
        <content type="html"><![CDATA[<h1 id="Jenkins教程-Docker-GitLab持续部署持续集成"><a href="#Jenkins教程-Docker-GitLab持续部署持续集成" class="headerlink" title="Jenkins教程-Docker+GitLab持续部署持续集成"></a>Jenkins教程-Docker+GitLab持续部署持续集成</h1><h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul><li><p><a href="https://mjava.top/2019/11/07/technology/learningExperience/Linux/Jenkins/Jenkins教程-搭建-Docker版/">Jenkins教程-搭建(Docker版)</a></p></li><li><p><a href="https://mjava.top/2019/11/12/technology/learningExperience/Linux/Jenkins/Jenkins教程-创建Maven项目/">Jenkins教程-创建Maven项目</a></p></li><li><p><a href="https://mjava.top/2019/11/12/technology/learningExperience/Linux/Jenkins/Jenkins教程-Docker+GitLab持续部署持续集成/">Jenkins教程-Docker+GitLab持续部署持续集成</a></p></li></ul><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><table><thead><tr><th></th><th>地址</th><th>系统</th><th>安装的软件</th></tr></thead><tbody><tr><td>主机１</td><td>10.25.0.72</td><td>Centos 7</td><td>Docker　,　Jenkins(Docker版)</td></tr><tr><td>主机２</td><td>10.25.0.50</td><td>Cnetos 7</td><td>Docker</td></tr></tbody></table><h2 id="Jenkins所需添加插件"><a href="#Jenkins所需添加插件" class="headerlink" title="Jenkins所需添加插件"></a>Jenkins所需添加插件</h2><ul><li><p><a href="https://plugins.jenkins.io/git-parameter" target="_blank" rel="noopener">Git Parameter</a></p></li><li><p><a href="https://plugins.jenkins.io/gitlab-plugin" target="_blank" rel="noopener">GitLab</a></p></li><li><p><a href="https://plugins.jenkins.io/ssh" target="_blank" rel="noopener">SSH</a></p></li></ul><h2 id="创建ssh登录凭据"><a href="#创建ssh登录凭据" class="headerlink" title="创建ssh登录凭据"></a>创建ssh登录凭据</h2><p><img src="https://mjava.top/img/20191112111043.png" alt="Jenkins界面"><br><img src="https://mjava.top/img/20191112111058.png" alt="Jenkins界面"><br><img src="https://mjava.top/img/20191112111115.png" alt="Jenkins界面"><br><img src="https://mjava.top/img/20191112111130.png" alt="Jenkins界面"></p><blockquote><p>这边选择Username with password,用账户密码来设置；然后在Username和Password输入框中分别输入10.25.0.50服务器的账号和密码。点击OK保存；</p></blockquote><p><img src="https://mjava.top/img/20191112111529.png" alt="Jenkins界面"><br><img src="https://mjava.top/img/20191112111806.png" alt="Jenkins界面"><br><img src="https://mjava.top/img/20191112160316.png" alt="Jenkins界面"></p><h2 id="添加SSH配置"><a href="#添加SSH配置" class="headerlink" title="添加SSH配置"></a>添加SSH配置</h2><p><img src="https://mjava.top/img/20191112160521.png" alt="Jenkins界面"></p><blockquote><p>找到SSH remote hosts </p></blockquote><p><img src="https://mjava.top/img/20191112160541.png" alt="Jenkins界面"></p><blockquote><p>设置你远程机器的ip和端口，然后选择刚配置好的凭证，点击save保存</p></blockquote><p><img src="https://mjava.top/img/20191112160920.png" alt="Jenkins界面"></p><h2 id="配置Job"><a href="#配置Job" class="headerlink" title="配置Job"></a>配置Job</h2><blockquote><p>进入上篇文章创建好的Job,在此基础上进行改造</p></blockquote><h3 id="配置Git-Parameter-来获取gitlab的Tag数据"><a href="#配置Git-Parameter-来获取gitlab的Tag数据" class="headerlink" title="配置Git Parameter,来获取gitlab的Tag数据"></a>配置Git Parameter,来获取gitlab的Tag数据</h3><p><img src="https://mjava.top/img/20191112161424.png" alt="Jenkins界面"></p><h3 id="配置触发器"><a href="#配置触发器" class="headerlink" title="配置触发器"></a>配置触发器</h3><blockquote><p>点击最下面的Generate,生成秘钥。然后记下URL:<a href="http://172.16.54.131:8080/project/JenkinsTest" target="_blank" rel="noopener">http://172.16.54.131:8080/project/JenkinsTest</a> 和生成的秘钥：60327d68d10f1f7621696edd42719d1c</p></blockquote><p><img src="https://mjava.top/img/20191112161808.png" alt="Jenkins界面"></p><h3 id="添加构建完成后的动作"><a href="#添加构建完成后的动作" class="headerlink" title="添加构建完成后的动作"></a>添加构建完成后的动作</h3><p><img src="https://mjava.top/img/20191112161842.png" alt="Jenkins界面"></p><h3 id="添加Execute-shell-和Execute-shell-script-on-remote-host-using-ssh"><a href="#添加Execute-shell-和Execute-shell-script-on-remote-host-using-ssh" class="headerlink" title="添加Execute shell 和Execute shell script on remote host using ssh"></a>添加Execute shell 和Execute shell script on remote host using ssh</h3><ul><li>Execute shell ： 执行Jenkins所在服务器的脚本</li><li>Execute shell script on remote host using ssh：登录远程服务器执行脚本</li></ul><p><img src="https://mjava.top/img/20191112161940.png" alt="Jenkins界面"></p><h3 id="编写你要执行的脚本"><a href="#编写你要执行的脚本" class="headerlink" title="编写你要执行的脚本"></a>编写你要执行的脚本</h3><blockquote><p>由于是自定义的，内容我就不粘贴出来了.编写好后点击保存</p></blockquote><p><img src="https://mjava.top/img/20191112164613.png" alt="Jenkins界面"></p><h2 id="开始构建"><a href="#开始构建" class="headerlink" title="开始构建"></a>开始构建</h2><h3 id="手动构建"><a href="#手动构建" class="headerlink" title="手动构建"></a>手动构建</h3><p><img src="https://mjava.top/img/20191112164653.png" alt="Jenkins界面"></p><h4 id="选择你要构建的tag标签，点击Build开始构建并自动部署"><a href="#选择你要构建的tag标签，点击Build开始构建并自动部署" class="headerlink" title="选择你要构建的tag标签，点击Build开始构建并自动部署"></a>选择你要构建的tag标签，点击Build开始构建并自动部署</h4><p><img src="https://mjava.top/img/20191112164746.png" alt="Jenkins界面"></p><h3 id="自动构建"><a href="#自动构建" class="headerlink" title="自动构建"></a>自动构建</h3><blockquote><p>自动构建是当你push或打tag上传代码的时候，Jenkins就会自动构建部署</p></blockquote><h4 id="自动构建流程"><a href="#自动构建流程" class="headerlink" title="自动构建流程"></a>自动构建流程</h4><p><img src="https://mjava.top/img/201911121717.png" alt="Jenkins界面"></p><p>####　配置GitLab代码仓库</p><blockquote><p>点击你你项目右边Settings的Integrations,然后在URL和Secret Tonken中填写刚保存的URL和秘钥，选择Tag push events,然后点击保存</p></blockquote><p><img src="https://mjava.top/img/20191112165036.png" alt="Jenkins界面"></p><p>　</p><h4 id="Git打Tag标签"><a href="#Git打Tag标签" class="headerlink" title="Git打Tag标签"></a>Git打Tag标签</h4><pre class=" language-shell"><code class="language-shell">git tag -a 1.0 -m '1.0'          //打一个1.0的taggit push origin 1.0             //上传1.0标签到远程仓库</code></pre><p>上传完tag后此时Jenkins已经开始自动构建并部署项目了；</p><h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>弄自动部署时，Jenkins和GitLab要都能互相访问的到，不然就会出错；</p>]]></content>
      
      
      <categories>
          
          <category> technology </category>
          
          <category> learningExperience </category>
          
          <category> Linux </category>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins教程-创建Maven项目</title>
      <link href="/2019/11/12/technology/learningExperience/Linux/Jenkins/Jenkins%E6%95%99%E7%A8%8B-%E5%88%9B%E5%BB%BAMaven%E9%A1%B9%E7%9B%AE/"/>
      <url>/2019/11/12/technology/learningExperience/Linux/Jenkins/Jenkins%E6%95%99%E7%A8%8B-%E5%88%9B%E5%BB%BAMaven%E9%A1%B9%E7%9B%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="Jenkins教程-创建Maven项目"><a href="#Jenkins教程-创建Maven项目" class="headerlink" title="Jenkins教程-创建Maven项目"></a>Jenkins教程-创建Maven项目</h1><h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul><li><p><a href="https://mjava.top/2019/11/07/technology/learningExperience/Linux/Jenkins/Jenkins教程-搭建-Docker版/">Jenkins教程-搭建(Docker版)</a></p></li><li><p><a href="https://mjava.top/2019/11/12/technology/learningExperience/Linux/Jenkins/Jenkins教程-创建Maven项目/">Jenkins教程-创建Maven项目</a></p></li><li><p><a href="https://mjava.top/2019/11/12/technology/learningExperience/Linux/Jenkins/Jenkins教程-Docker+GitLab持续部署持续集成/">Jenkins教程-Docker+GitLab持续部署持续集成</a></p></li></ul><h2 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h2><p>本教程是和gitlab集成,所以要有gitlab仓库。注意：如果后期要弄自动部署的话,你Jenkins的地址gitlab必须能访问到。不然gitlab监听到事件就通知不了Jenkins了；</p><h3 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h3><ul><li>Centos 7</li><li>Jenkins(Docker版)</li></ul><h3 id="所需插件"><a href="#所需插件" class="headerlink" title="所需插件"></a>所需插件</h3><blockquote><p>除了搭建Jenkins时安装的插件,还需安装的插件</p></blockquote><ul><li><a href="https://plugins.jenkins.io/maven-plugin" target="_blank" rel="noopener">Maven Integration</a></li></ul><h3 id="安装Maven"><a href="#安装Maven" class="headerlink" title="安装Maven"></a>安装Maven</h3><p>点击侧边栏的Manage Jenkins,然后点击Global Tool Configuration,进入全局工具设置<br><img src="https://mjava.top/img/20191112105932.png" alt="Jenkins界面"></p><p>然后找到Maven,点击Add Maven,可以选择你要的Maven版本，然后设置一个名字。点击保存</p><p><img src="https://mjava.top/img/20191112110029.png" alt="Jenkins界面"><br><img src="https://mjava.top/img/20191112110130.png" alt="Jenkins界面"></p><h3 id="创建Git登录凭证"><a href="#创建Git登录凭证" class="headerlink" title="创建Git登录凭证"></a>创建Git登录凭证</h3><p>点击侧边栏的凭证，然后按图点击<br><img src="https://mjava.top/img/20191112111043.png" alt="Jenkins界面"><br><img src="https://mjava.top/img/20191112111058.png" alt="Jenkins界面"><br><img src="https://mjava.top/img/20191112111115.png" alt="Jenkins界面"><br><img src="https://mjava.top/img/20191112111130.png" alt="Jenkins界面"></p><p>这边Kind有很多选项，这边选择Username with password,用账户密码来设置；然后在Username和Password输入框中分别输入gitlab的账号和密码。点击OK保存；</p><p><img src="https://mjava.top/img/20191112111529.png" alt="Jenkins界面"><br><img src="https://mjava.top/img/20191112111806.png" alt="Jenkins界面"></p><p>保存后就会出现你保存好的凭证；</p><h2 id="创建JOB"><a href="#创建JOB" class="headerlink" title="创建JOB"></a>创建JOB</h2><p><img src="https://mjava.top/img/20191112111950.png" alt="Jenkins界面"></p><h3 id="创建Maven项目"><a href="#创建Maven项目" class="headerlink" title="创建Maven项目"></a>创建Maven项目</h3><p><img src="https://mjava.top/img/20191112112035.png" alt="Jenkins界面"></p><h3 id="输入你的gitlab项目地址，然后选择刚才配置的凭证"><a href="#输入你的gitlab项目地址，然后选择刚才配置的凭证" class="headerlink" title="输入你的gitlab项目地址，然后选择刚才配置的凭证"></a>输入你的gitlab项目地址，然后选择刚才配置的凭证</h3><p><img src="https://mjava.top/img/20191112112620.png" alt="Jenkins界面"></p><h3 id="输入Maven打包命令，然后点击保存"><a href="#输入Maven打包命令，然后点击保存" class="headerlink" title="输入Maven打包命令，然后点击保存"></a>输入Maven打包命令，然后点击保存</h3><p><img src="https://mjava.top/img/20191112112719.png" alt="Jenkins界面"></p><h3 id="开始构建"><a href="#开始构建" class="headerlink" title="开始构建"></a>开始构建</h3><p><img src="https://mjava.top/img/20191112112747.png" alt="Jenkins界面"></p><h3 id="查看构建项目日志"><a href="#查看构建项目日志" class="headerlink" title="查看构建项目日志"></a>查看构建项目日志</h3><blockquote><p>第一次构建会比慢，因为他要下载maven相关构建的包</p></blockquote><p><img src="https://mjava.top/img/20191112112803.png" alt="Jenkins界面"><br><img src="https://mjava.top/img/20191112112841.png" alt="Jenkins界面"><br><img src="https://mjava.top/img/20191112112854.png" alt="Jenkins界面"></p><h3 id="查看构建好的jar包"><a href="#查看构建好的jar包" class="headerlink" title="查看构建好的jar包"></a>查看构建好的jar包</h3><p><img src="https://mjava.top/img/20191112122030.png" alt="Jenkins界面"><br><img src="https://mjava.top/img/20191112122112.png" alt="Jenkins界面"><br><img src="https://mjava.top/img/20191112122135.png" alt="Jenkins界面"><br><img src="https://mjava.top/img/20191112122200.png" alt="Jenkins界面"></p><blockquote><p>到此，构建maven项目已结束，可以下载这个jar包进行部署。后面会有自动构建部署的教程</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> technology </category>
          
          <category> learningExperience </category>
          
          <category> Linux </category>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins初始化界面插件安装失败解决方法</title>
      <link href="/2019/11/07/technology/learningExperience/Linux/Jenkins/Jenkins%E5%88%9D%E5%A7%8B%E5%8C%96%E7%95%8C%E9%9D%A2%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"/>
      <url>/2019/11/07/technology/learningExperience/Linux/Jenkins/Jenkins%E5%88%9D%E5%A7%8B%E5%8C%96%E7%95%8C%E9%9D%A2%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="Jenkins初始化界面插件安装失败解决方法"><a href="#Jenkins初始化界面插件安装失败解决方法" class="headerlink" title="Jenkins初始化界面插件安装失败解决方法"></a>Jenkins初始化界面插件安装失败解决方法</h1><p>​    </p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在初始化安装界面可能由于网络问题会出现插件下载失败，就像下面这个界面</p><p><img src="https://mjava.top/img/jenkins_error_2_20191107155729.png" alt="Jenkins插件安装失败"></p><p>别着急，直接点击继续，先完成初始化步骤。</p><h2 id="设置源"><a href="#设置源" class="headerlink" title="设置源"></a>设置源</h2><ul><li>插件下载失败，一般都是网络的原因，只要更换到国内的软件源就可以了，点击Manage Jenkins<br><img src="https://mjava.top/img/20191107162947.png" alt="Jenkins"></li></ul><ul><li>点击Correct<br><img src="https://mjava.top/img/20191107163016.png" alt="Jenkins"></li></ul><ul><li>点击Advanced<br><img src="https://mjava.top/img/20191107163040.png" alt="Jenkins"></li></ul><ul><li>下拉找到Update Site<br><img src="https://mjava.top/img/20191107163100.png" alt="Jenkins"></li></ul><ul><li>然后把输入框的内容换成</li></ul><pre class=" language-shell"><code class="language-shell">https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/2.89/update-center.json</code></pre><p><img src="https://mjava.top/img/20191107165325.png" alt="Jenkins"></p><h2 id="重新下载插件"><a href="#重新下载插件" class="headerlink" title="重新下载插件"></a>重新下载插件</h2><ul><li>然后重新下载刚才那些下载失败的插件,这里随机选一个<br><img src="https://mjava.top/img/20191107165630.png" alt="Jenkins"></li></ul><ul><li>在刚才设置源的那个界面点击 Available，搜索插件，选择，点击install<br><img src="https://mjava.top/img/20191107165916.png" alt="Jenkins"></li></ul><ul><li>插件正在安装<br><img src="https://mjava.top/img/20191107165947.png" alt="Jenkins"></li></ul><blockquote><p>安装完全部插件后然后重启Jenkins，插件界面的报错信息才会消失;如果遇到插件下载不下来或搜不到，可以看这篇文章：<a href="https://mjava.top/2019/11/12/technology/learningExperience/Linux/Jenkins/Jenkins插件版本太旧的更新方法/">Jenkins插件版本太旧的更新方法</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> technology </category>
          
          <category> learningExperience </category>
          
          <category> Linux </category>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins教程-搭建(Docker版)</title>
      <link href="/2019/11/07/technology/learningExperience/Linux/Jenkins/Jenkins%E6%95%99%E7%A8%8B-%E6%90%AD%E5%BB%BA-Docker%E7%89%88/"/>
      <url>/2019/11/07/technology/learningExperience/Linux/Jenkins/Jenkins%E6%95%99%E7%A8%8B-%E6%90%AD%E5%BB%BA-Docker%E7%89%88/</url>
      
        <content type="html"><![CDATA[<h1 id="Jenkins教程-搭建-Docker版"><a href="#Jenkins教程-搭建-Docker版" class="headerlink" title="Jenkins教程-搭建(Docker版)"></a>Jenkins教程-搭建(Docker版)</h1><h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul><li><p><a href="https://mjava.top/2019/11/07/technology/learningExperience/Linux/Jenkins/Jenkins教程-搭建-Docker版/">Jenkins教程-搭建(Docker版)</a></p></li><li><p><a href="https://mjava.top/2019/11/12/technology/learningExperience/Linux/Jenkins/Jenkins教程-创建Maven项目/">Jenkins教程-创建Maven项目</a></p></li><li><p><a href="https://mjava.top/2019/11/12/technology/learningExperience/Linux/Jenkins/Jenkins教程-Docker+GitLab持续部署持续集成/">Jenkins教程-Docker+GitLab持续部署持续集成</a></p></li></ul><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><ul><li><p>主机：172.16.54.131</p></li><li><p>系统：Cnetos 7</p></li></ul><h2 id="安装Docker-CE"><a href="#安装Docker-CE" class="headerlink" title="安装Docker-CE"></a>安装Docker-CE</h2><h3 id="检查Docker"><a href="#检查Docker" class="headerlink" title="检查Docker"></a>检查Docker</h3><p>首先检查本机是否安装Docker，如果安装了直接跳过安装Docker步骤</p><pre class=" language-shell"><code class="language-shell">docker -v</code></pre><blockquote><p>如果出现Docker version 19.03.4, build 9013bf583a类似的信息，则说明已安装Docker</p></blockquote><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ul><li>本教程以centos7安装方式说明，其他系统安装方式会有不同</li></ul><p>执行以下命令，安装Docker</p><pre class=" language-shell"><code class="language-shell">yum install -y yum-utils device-mapper-persistent-data lvm2yum-config-manager \    --add-repo \    https://download.docker.com/linux/centos/docker-ce.repoyum install docker-ceservice docker startsystemctl enable docker</code></pre><ul><li>第一条命令：为添加源做准备 使其支持存储</li><li>第二条命令：添加docker-ce软件源</li><li>第三条命令：安装docker-ce</li><li>第四条命令：启动docker服务</li><li>第五条命令：设置开启自启</li></ul><h2 id="安装Jenkins的Docker容器"><a href="#安装Jenkins的Docker容器" class="headerlink" title="安装Jenkins的Docker容器"></a>安装Jenkins的Docker容器</h2><h3 id="创建文件夹"><a href="#创建文件夹" class="headerlink" title="创建文件夹"></a>创建文件夹</h3><p>在创建容器前先在宿主机创建一个Jenkins的工作文件夹，用于持久化</p><pre class=" language-shell"><code class="language-shell">mkdir /opt/jenkins                 //创建文件夹chmod 7777 /opt/jenkins            //授予权限</code></pre><blockquote><p>该文件夹一定要给权限，不然docker容器访问不了，容器会创建失败。</p></blockquote><h3 id="拉取官方镜像"><a href="#拉取官方镜像" class="headerlink" title="拉取官方镜像"></a>拉取官方镜像</h3><pre class=" language-shell"><code class="language-shell">docker pull jenkins/jenkins:lts</code></pre><h3 id="启动容器"><a href="#启动容器" class="headerlink" title="启动容器"></a>启动容器</h3><pre class=" language-shell"><code class="language-shell">docker run -d -p 8080:8080 -p 50000:50000 -u root -v /var/run/docker.sock:/var/run/docker.sock -v $(which docker):/usr/bin/docker -v /opt/jenkins:/var/jenkins_home -v /etc/localtime:/etc/localtime -e JAVA_OPTS=-Duser.timezone=Asia/Shanghai --restart=always --name jenkins jenkins/jenkins:lts</code></pre><blockquote><p>启动容器一定要用root用户进入docker容器，不然访问不了宿主机的docker服务。还有要挂载/var/run/docker.sock和$(which docker)这两个文件夹到容器，这样docker版的jenkins才可以用使用docker相关服务。 </p></blockquote><h3 id="查看容器日志"><a href="#查看容器日志" class="headerlink" title="查看容器日志"></a>查看容器日志</h3><pre class=" language-shell"><code class="language-shell">docker logs jenkins </code></pre><p><img src="https://mjava.top/img/jenkins_docker_logs_4345.png" alt="log界面"></p><blockquote><p>记下43455b344f904cf69a4af9e231f7d48d这个密码，等下要用到</p></blockquote><h2 id="初始化Jenkins"><a href="#初始化Jenkins" class="headerlink" title="初始化Jenkins"></a>初始化Jenkins</h2><h3 id="解锁"><a href="#解锁" class="headerlink" title="解锁"></a>解锁</h3><p>在浏览器访问172.16.54.131:8080这个地址，进入Jenkins的web界面。（如果访问不了，请开启防火墙的8080端口）</p><p><img src="https://mjava.top/img/jenkins_web_sign_in_201911071359.png" alt="jenkins界面"></p><p>在输入框中填入刚才保存的密码</p><h3 id="自定义"><a href="#自定义" class="headerlink" title="自定义"></a>自定义</h3><p>推荐直接选 安装推荐的插件</p><p><img src="https://mjava.top/img/jenkins_setupwizard_1911071408.png" alt="Jenkins自定义界面"></p><h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><p>到这个界面等他安装完成，时间会长一点</p><p><img src="https://mjava.top/img/jenkins_191107141216.png" alt="Jenkins安装插件"></p><blockquote><p>如这个界面插件下载失败，直接点继续，进行下一步，具体解决办法可以看这个篇文章</p><p><a href="https://mjava.top/2019/11/07/technology/learningExperience/Linux/Jenkins/Jenkins%E5%88%9D%E5%A7%8B%E5%8C%96%E7%95%8C%E9%9D%A2%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/">Jenkins初始化界面插件安装失败解决方法</a></p></blockquote><h3 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h3><p>设置你的登录账号和密码，然后点保存完成<br><img src="https://mjava.top/img/jenkins_20191107160016.png" alt="Jenkins创建用户"></p><h3 id="实例配置"><a href="#实例配置" class="headerlink" title="实例配置"></a>实例配置</h3><p>默认直接点保存完成<br><img src="https://mjava.top/img/jenkins_20191107160056.png" alt="Jenkins实例配置"></p><h3 id="开始使用"><a href="#开始使用" class="headerlink" title="开始使用"></a>开始使用</h3><p>点击开始使用Jenkins<br><img src="https://mjava.top/img/jenkins_20191107160129.png" alt="Jenkins开始使用"></p><h3 id="Jenkins主界面"><a href="#Jenkins主界面" class="headerlink" title="Jenkins主界面"></a>Jenkins主界面</h3><p>进入Jenkins主界面，到此教程结束<br><img src="https://mjava.top/img/jenkins_20191107160204.png" alt="Jenkins主界面"></p>]]></content>
      
      
      <categories>
          
          <category> technology </category>
          
          <category> learningExperience </category>
          
          <category> Linux </category>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>《设计模式系例(一)》-单例模式</title>
      <link href="/2019/10/22/technology/learningExperience/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%B3%BB%E5%88%97-%E4%B8%80-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/10/22/technology/learningExperience/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%B3%BB%E5%88%97-%E4%B8%80-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="《设计模式系例-一-》-单例模式"><a href="#《设计模式系例-一-》-单例模式" class="headerlink" title="《设计模式系例(一)》-单例模式"></a>《设计模式系例(一)》-单例模式</h1><p>​    网上说单例模式是所有模式中最简单的一种模式，巧的是我也这么认为。不过越简单的东西，往往坑就隐藏的越深，这边文章我会把我知道的几个坑所出来。</p><h2 id="一-什么是单例模式"><a href="#一-什么是单例模式" class="headerlink" title="一.什么是单例模式"></a>一.什么是单例模式</h2><p>​    就如同他的名字一样，’单例’-就是只有一个实例。也就是说一个类在全局中最多只有一个实例存在，不能在多了，在多就不叫单例模式了。</p><h3 id="1-白话小故事"><a href="#1-白话小故事" class="headerlink" title="1.白话小故事"></a>1.白话小故事</h3><p>​    程序员小H单身已久，每天不是对着电脑，就是抱着手机这样来维持生活。某日，坐在电脑前，突然感觉一切都索然无味。谋生想找一个对象来一起度过人生美好的每一天。</p><p>​    于是精心打扮出门找对象，由于小H很帅，很快就找到了心仪的另一半–小K。小H的心中永远只有小K一个人，而且发誓永远不会在找新对象。</p><blockquote><p>小H和小K的关系就是单例模式，在小H的全局中只有一个小K对象，且无第二个，如果有第二个的话，他们之间的关系就出问题了。哈哈</p></blockquote><h2 id="2-用在哪里"><a href="#2-用在哪里" class="headerlink" title="2.用在哪里"></a>2.用在哪里</h2><p>​    单例模式一般用在对实例数量有严格要求的地方，比如数据池，线程池，缓存，session回话等等。</p><h2 id="3-在Java中构成的条件"><a href="#3-在Java中构成的条件" class="headerlink" title="3.在Java中构成的条件"></a>3.在Java中构成的条件</h2><ul><li>静态变量</li><li>静态方法</li><li>私有构造器</li></ul><h2 id="二-单例模式的两种形态"><a href="#二-单例模式的两种形态" class="headerlink" title="二.单例模式的两种形态"></a>二.单例模式的两种形态</h2><h3 id="1-懒汉模式"><a href="#1-懒汉模式" class="headerlink" title="1.懒汉模式"></a>1.懒汉模式</h3><blockquote><p>线程不安全</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> Singleton unsingleton<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Singleton <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>unsingleton<span class="token operator">==</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>            unsingleton<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> unsingleton<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="2-饿汉模式"><a href="#2-饿汉模式" class="headerlink" title="2.饿汉模式"></a>2.饿汉模式</h3><blockquote><p>线程安全</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> Singleton unsingleton<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Singleton <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> unsingleton<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="调用"><a href="#调用" class="headerlink" title="调用"></a>调用</h4><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Singleton singleton1<span class="token operator">=</span>Singleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="三-懒汉模式优化成线程安全"><a href="#三-懒汉模式优化成线程安全" class="headerlink" title="三.懒汉模式优化成线程安全"></a>三.懒汉模式优化成线程安全</h2><p>  懒汉模式要变成线程安全的除了用饿汉模式之外，还有两种方法。</p><h3 id="1-加synchronized关键字"><a href="#1-加synchronized关键字" class="headerlink" title="1.加synchronized关键字"></a>1.加synchronized关键字</h3><blockquote><p>此方法是最简单又有效的方法，不过对性能上会有所损失。比如两个线程同时调用这个实例，其中一个线程要等另一个线程调用完才可以继续调用。而线程不安全往往发生在这个实例在第一次调用的时候发生，当实例被调用一次后，线程是安全的，所以加synchronized就显得有些浪费性能。</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> Singleton unsingleton<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> Singleton <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>unsingleton<span class="token operator">==</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>            unsingleton<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> unsingleton<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="2-用”双重检查加锁”"><a href="#2-用”双重检查加锁”" class="headerlink" title="2.用”双重检查加锁”"></a>2.用”双重检查加锁”</h3><blockquote><p>上个方法说到，线程不安全往往发生在这个实例在第一次调用的时候发生，当实例被调用一次后，线程是安全的。那有没有方法只有在第一次调用的时候才用synchronized关键字，而第一次后就不用synchronized关键字呢？答案是当然有的，就是用volatile来修饰静态变量，保持其可见性。</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> Singleton unsingleton<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Singleton <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>unsingleton<span class="token operator">==</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//只有当第一次访问的时候才会使用synchronized关键字</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>Singleton<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                unsingleton<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> unsingleton<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="三种线程安全的单例模式比较"><a href="#三种线程安全的单例模式比较" class="headerlink" title="三种线程安全的单例模式比较"></a>三种线程安全的单例模式比较</h2><ul><li><p>饿汉模式：性能好，写法简单，个人比较推荐用这个</p></li><li><p>加synchronized关键字：性能差，不过对懒汉模式的盖章比较直接有效。</p></li><li><p>volatile-双重验证加锁：性能好，对Java版本有要求，要求Java5以上版本</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> technology </category>
          
          <category> learningExperience </category>
          
          <category> 设计模式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 设计模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2019年末学习计划</title>
      <link href="/2019/10/18/summary/annualSummary/2019%E5%B9%B4%E6%9C%AB%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92/"/>
      <url>/2019/10/18/summary/annualSummary/2019%E5%B9%B4%E6%9C%AB%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> summary </category>
          
          <category> annualSummary </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>RocketMQ集群搭建</title>
      <link href="/2019/10/09/technology/learningExperience/RocketMq/RocketMQ%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"/>
      <url>/2019/10/09/technology/learningExperience/RocketMq/RocketMQ%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="RocketMQ集群搭建"><a href="#RocketMQ集群搭建" class="headerlink" title="RocketMQ集群搭建"></a>RocketMQ集群搭建</h1><p>  本文只讲RocketMQ集群的搭建(异步复制)，具体理论知识后续会在写新文章详细介绍;</p><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><ul><li>JDK1.8</li><li>Centos7</li></ul><h2 id="主机-两台"><a href="#主机-两台" class="headerlink" title="主机-两台"></a>主机-两台</h2><ul><li>centos7_1 :172.16.54.130</li><li>centos7_2 :172.16.54.128</li></ul><h2 id="软件资源"><a href="#软件资源" class="headerlink" title="软件资源"></a>软件资源</h2><ul><li>JDK1.8 :<a href="https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></li><li>RocketMQ4.5.2 :<a href="http://mirrors.tuna.tsinghua.edu.cn/apache/rocketmq/4.5.2/rocketmq-all-4.5.2-bin-release.zip" target="_blank" rel="noopener">http://mirrors.tuna.tsinghua.edu.cn/apache/rocketmq/4.5.2/rocketmq-all-4.5.2-bin-release.zip</a></li></ul><h2 id="安装JDK"><a href="#安装JDK" class="headerlink" title="安装JDK"></a>安装JDK</h2><p>  首先分别在两台主机上安装JDK1.8，具体安装方法这里就不说了，网上随便搜一搜都有；</p><h2 id="配置RocketMQ"><a href="#配置RocketMQ" class="headerlink" title="配置RocketMQ"></a>配置RocketMQ</h2><p>  把下载的RocketMQ包分别上传到两台服务器上，然后用命令解压:</p><pre class=" language-shell"><code class="language-shell"># unzip rocketmq-all-4.5.2-bin-release.zip</code></pre><h3 id="编写配置文件"><a href="#编写配置文件" class="headerlink" title="编写配置文件"></a>编写配置文件</h3><p>  这一步很重要，集群的搭建关键在于配置文件的编写，首先看看RocketMq配置文件的解析:</p><pre class=" language-properties"><code class="language-properties"><span class="token comment" spellcheck="true">#所属集群名字 </span><span class="token attr-name">brokerClusterName</span><span class="token punctuation">=</span><span class="token attr-value">rocketmq-cluster</span><span class="token comment" spellcheck="true">#broker名字，每队master和slave保持一致</span><span class="token attr-name">brokerName</span><span class="token punctuation">=</span><span class="token attr-value">broker-a</span><span class="token comment" spellcheck="true">#0 表示 Master，>0 表示 Slave</span><span class="token attr-name">brokerId</span><span class="token punctuation">=</span><span class="token attr-value">0 </span><span class="token comment" spellcheck="true">#指定主机ip</span><span class="token attr-name">brokerIP1</span> <span class="token punctuation">=</span> <span class="token attr-value">主机IP</span><span class="token comment" spellcheck="true">#nameServer地址，分号分割</span><span class="token attr-name">namesrvAddr</span><span class="token punctuation">=</span><span class="token attr-value">主机IP:9876;主机IP:9876</span><span class="token comment" spellcheck="true">#在发送消息时，自动创建服务器不存在的topic，默认创建的队列数 </span><span class="token attr-name">defaultTopicQueueNums</span><span class="token punctuation">=</span><span class="token attr-value">4</span><span class="token comment" spellcheck="true">#是否允许 Broker 自动创建Topic，建议线下开启，线上关闭 </span><span class="token attr-name">autoCreateTopicEnable</span><span class="token punctuation">=</span><span class="token attr-value">true</span><span class="token comment" spellcheck="true">#是否允许 Broker 自动创建订阅组，建议线下开启，线上关闭 </span><span class="token attr-name">autoCreateSubscriptionGroup</span><span class="token punctuation">=</span><span class="token attr-value">true</span><span class="token comment" spellcheck="true">#Broker 对外服务的监听端口 </span><span class="token attr-name">listenPort</span><span class="token punctuation">=</span><span class="token attr-value">10911</span><span class="token comment" spellcheck="true">#删除文件时间点，默认凌晨 4点</span><span class="token attr-name"> deleteWhen</span><span class="token punctuation">=</span><span class="token attr-value">04</span><span class="token comment" spellcheck="true">#文件保留时间，默认 48 小时 </span><span class="token attr-name">fileReservedTime</span><span class="token punctuation">=</span><span class="token attr-value">120</span><span class="token comment" spellcheck="true">#commitLog每个文件的大小默认1G </span><span class="token attr-name">mapedFileSizeCommitLog</span><span class="token punctuation">=</span><span class="token attr-value">1073741824</span><span class="token comment" spellcheck="true">#ConsumeQueue每个文件默认存30W条，根据业务情况调整</span><span class="token attr-name">mapedFileSizeConsumeQueue</span><span class="token punctuation">=</span><span class="token attr-value">300000</span><span class="token comment" spellcheck="true">#检测物理文件磁盘空间</span><span class="token attr-name">diskMaxUsedSpaceRatio</span><span class="token punctuation">=</span><span class="token attr-value">88</span><span class="token comment" spellcheck="true">#存储路径</span><span class="token attr-name">storePathRootDir</span><span class="token punctuation">=</span><span class="token attr-value">/usr/local/rocketmq/store</span><span class="token comment" spellcheck="true">#commitLog 存储路径 </span><span class="token attr-name">storePathCommitLog</span><span class="token punctuation">=</span><span class="token attr-value">/usr/local/rocketmq/store/commitlog</span><span class="token comment" spellcheck="true">#消费队列存储路径存储路径</span><span class="token attr-name">storePathConsumeQueue</span><span class="token punctuation">=</span><span class="token attr-value">/usr/local/rocketmq/store/consumequeue</span><span class="token comment" spellcheck="true">#消息索引存储路径</span><span class="token attr-name">storePathIndex</span><span class="token punctuation">=</span><span class="token attr-value">/usr/local/rocketmq/store/index</span><span class="token comment" spellcheck="true">#checkpoint 文件存储路径</span><span class="token attr-name">storeCheckpoint</span><span class="token punctuation">=</span><span class="token attr-value">/usr/local/rocketmq/store/checkpoint</span><span class="token comment" spellcheck="true">#Broker 的角色</span><span class="token comment" spellcheck="true">#- ASYNC_MASTER 异步复制Master</span><span class="token comment" spellcheck="true">#- SYNC_MASTER 同步双写Master</span><span class="token comment" spellcheck="true">#- SLAVE </span><span class="token attr-name">brokerRole</span><span class="token punctuation">=</span><span class="token attr-value">ASYNC_MASTER</span><span class="token comment" spellcheck="true">#刷盘方式</span><span class="token comment" spellcheck="true">#- ASYNC_FLUSH 异步刷盘</span><span class="token comment" spellcheck="true">#- SYNC_FLUSH 同步刷盘 flushDiskType=ASYNC_FLUSH</span><span class="token comment" spellcheck="true">#checkTransactionMessageEnable=false</span><span class="token comment" spellcheck="true">#abort 文件存储路径</span><span class="token attr-name">abortFile</span><span class="token punctuation">=</span><span class="token attr-value">/usr/javawork/apache-rocketmq/store/abort</span><span class="token comment" spellcheck="true">#限制的消息大小 maxMessageSize=65536</span></code></pre><p>以上配置可根据个人需求加入到自己的配置文件中；RocketMQ官方已经为我们创建好了简单的集群配置文件，进去解压后的文件夹，在进入到conf文件夹，可以看到里面有三个文件夹：</p><ul><li>2m-2s-async :2个master，2个slave，async异步复制</li><li>2m-2s-sync :2个master，2个slave，sync同步双写</li><li>2m-noslave :2个master,没有slave</li></ul><p>这里我们用async异步复制模式，进入文件夹，分别编辑：</p><h4 id="centos7-1主机编辑如下两个配置文件"><a href="#centos7-1主机编辑如下两个配置文件" class="headerlink" title="centos7_1主机编辑如下两个配置文件"></a>centos7_1主机编辑如下两个配置文件</h4><blockquote><p>注意，master和slave的文件存储路径不能用同一个路径，所以必须要区分开。</p></blockquote><h5 id="broker-a-properties"><a href="#broker-a-properties" class="headerlink" title="broker-a.properties"></a>broker-a.properties</h5><pre class=" language-properties"><code class="language-properties"><span class="token attr-name">brokerClusterName</span><span class="token punctuation">=</span><span class="token attr-value">DefaultCluster</span><span class="token attr-name">brokerName</span><span class="token punctuation">=</span><span class="token attr-value">broker-a</span><span class="token attr-name">brokerId</span><span class="token punctuation">=</span><span class="token attr-value">0</span><span class="token attr-name">deleteWhen</span><span class="token punctuation">=</span><span class="token attr-value">04</span><span class="token attr-name">fileReservedTime</span><span class="token punctuation">=</span><span class="token attr-value">48</span><span class="token attr-name">brokerRole</span><span class="token punctuation">=</span><span class="token attr-value">ASYNC_MASTER</span><span class="token attr-name">flushDiskType</span><span class="token punctuation">=</span><span class="token attr-value">ASYNC_FLUSH</span><span class="token attr-name">namesrvAddr</span><span class="token punctuation">=</span><span class="token attr-value">172.16.54.128:9876;172.16.54.130:9876</span><span class="token attr-name">listenPort</span><span class="token punctuation">=</span><span class="token attr-value">10911</span><span class="token comment" spellcheck="true">#存储路径</span><span class="token attr-name">storePathRootDir</span><span class="token punctuation">=</span><span class="token attr-value">/usr/local/rocketmq/master/store</span><span class="token comment" spellcheck="true">#commitLog 存储路径 </span><span class="token attr-name">storePathCommitLog</span><span class="token punctuation">=</span><span class="token attr-value">/usr/local/rocketmq/master/store/commitlog</span><span class="token comment" spellcheck="true">#消费队列存储路径存储路径</span><span class="token attr-name">storePathConsumeQueue</span><span class="token punctuation">=</span><span class="token attr-value">/usr/local/rocketmq/master/store/consumequeue</span><span class="token comment" spellcheck="true">#消息索引存储路径</span><span class="token attr-name">storePathIndex</span><span class="token punctuation">=</span><span class="token attr-value">/usr/local/rocketmq/master/store/index</span><span class="token comment" spellcheck="true">#checkpoint 文件存储路径</span><span class="token attr-name">storeCheckpoint</span><span class="token punctuation">=</span><span class="token attr-value">/usr/local/rocketmq/master/store/checkpoint</span></code></pre><p><em>这个监听端口设置设置成10911后还会自动监听10909,10912这两个端口，所以要配置文件要避免设置到相应的端口。</em></p><h5 id="broker-a-s-properties"><a href="#broker-a-s-properties" class="headerlink" title="broker-a-s.properties"></a>broker-a-s.properties</h5><pre class=" language-properties"><code class="language-properties"><span class="token attr-name">brokerClusterName</span><span class="token punctuation">=</span><span class="token attr-value">DefaultCluster</span><span class="token attr-name">brokerName</span><span class="token punctuation">=</span><span class="token attr-value">broker-a</span><span class="token attr-name">brokerId</span><span class="token punctuation">=</span><span class="token attr-value">1</span><span class="token attr-name">deleteWhen</span><span class="token punctuation">=</span><span class="token attr-value">04</span><span class="token attr-name">fileReservedTime</span><span class="token punctuation">=</span><span class="token attr-value">48</span><span class="token attr-name">brokerRole</span><span class="token punctuation">=</span><span class="token attr-value">SLAVE</span><span class="token attr-name">flushDiskType</span><span class="token punctuation">=</span><span class="token attr-value">ASYNC_FLUSH</span><span class="token attr-name">namesrvAddr</span><span class="token punctuation">=</span><span class="token attr-value">172.16.54.128:9876;172.16.54.130:9876</span><span class="token attr-name">listenPort</span><span class="token punctuation">=</span><span class="token attr-value">20911</span><span class="token comment" spellcheck="true">#存储路径</span><span class="token attr-name">storePathRootDir</span><span class="token punctuation">=</span><span class="token attr-value">/usr/local/rocketmq/slave/store</span><span class="token comment" spellcheck="true">#commitLog 存储路径 </span><span class="token attr-name">storePathCommitLog</span><span class="token punctuation">=</span><span class="token attr-value">/usr/local/rocketmq/slave/store/commitlog</span><span class="token comment" spellcheck="true">#消费队列存储路径存储路径</span><span class="token attr-name">storePathConsumeQueue</span><span class="token punctuation">=</span><span class="token attr-value">/usr/local/rocketmq/slave/store/consumequeue</span><span class="token comment" spellcheck="true">#消息索引存储路径</span><span class="token attr-name">storePathIndex</span><span class="token punctuation">=</span><span class="token attr-value">/usr/local/rocketmq/slave/store/index</span><span class="token comment" spellcheck="true">#checkpoint 文件存储路径</span><span class="token attr-name">storeCheckpoint</span><span class="token punctuation">=</span><span class="token attr-value">/usr/local/rocketmq/slave/store/checkpoint</span></code></pre><p><em>这个监听端口设置设置成20911后还会自动监听20909,20912这两个端口，所以要配置文件要避免设置到相应的端口。</em></p><h4 id="centos7-2主机编辑如下两个配置文件"><a href="#centos7-2主机编辑如下两个配置文件" class="headerlink" title="centos7_2主机编辑如下两个配置文件"></a>centos7_2主机编辑如下两个配置文件</h4><h5 id="和centos7-1主机配置一样，这边就不写了，不过brokerName要设置成不同的，我这边设置成broker-b。"><a href="#和centos7-1主机配置一样，这边就不写了，不过brokerName要设置成不同的，我这边设置成broker-b。" class="headerlink" title="和centos7_1主机配置一样，这边就不写了，不过brokerName要设置成不同的，我这边设置成broker-b。"></a>和centos7_1主机配置一样，这边就不写了，不过brokerName要设置成不同的，我这边设置成broker-b。</h5><h2 id="设置RocketMQ运行的JVM内存-非必须"><a href="#设置RocketMQ运行的JVM内存-非必须" class="headerlink" title="设置RocketMQ运行的JVM内存(非必须)"></a>设置RocketMQ运行的JVM内存(非必须)</h2><blockquote><p>此项设置非必须，如果你主机内存很大的话可以不设置，RocketMQ默认要8G。</p></blockquote><p>  进入rocketmq-all-4.5.2-bin-release/bin目录，两台主机分别设置runbroker.sh和runserver.sh这两个文件。</p><ul><li>runbroker.sh：找到如下一行配置</li></ul><pre class=" language-properties"><code class="language-properties"><span class="token attr-name">JAVA_OPT</span><span class="token punctuation">=</span><span class="token attr-value">"${JAVA_OPT} -server -Xms8g -Xmx8g -Xmn4g"</span>改成：<span class="token attr-name">JAVA_OPT</span><span class="token punctuation">=</span><span class="token attr-value">"${JAVA_OPT} -server -Xms512m -Xmx512m -Xmn256m"</span></code></pre><ul><li>runserver.sh: 找到如下一行配置</li></ul><pre class=" language-properties"><code class="language-properties"><span class="token attr-name">JAVA_OPT</span><span class="token punctuation">=</span><span class="token attr-value">"${JAVA_OPT} -server -Xms4g -Xmx4g -Xmn2g -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m"</span>改成：<span class="token attr-name">JAVA_OPT</span><span class="token punctuation">=</span><span class="token attr-value">"${JAVA_OPT} -server -Xms512m -Xmx512m -Xmn256m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m"</span></code></pre><h2 id="启动RocketMQ"><a href="#启动RocketMQ" class="headerlink" title="启动RocketMQ"></a>启动RocketMQ</h2><blockquote><p>启动RocketMQ前为了方便访问，先关闭两台主机的防火墙。执行如下命令：</p><pre class=" language-shell"><code class="language-shell"># service firewalld stop</code></pre></blockquote><p>  进入rocketmq-all-4.5.2-bin-release/bin这个目录，两台主机分别执行以下命令：</p><ul><li>启动namesrv</li></ul><pre class=" language-shell"><code class="language-shell"># nohup sh mqnamesrv &</code></pre><ul><li>启动broker-master</li></ul><pre class=" language-shell"><code class="language-shell"># nohup sh mqbroker -c ../conf/2m-2s-async/broker-a.properties &</code></pre><ul><li>启动broker-slave</li></ul><pre class=" language-shell"><code class="language-shell"># nohup sh mqbroker -c ../conf/2m-2s-async/broker-a-s.properties &</code></pre><p><em>注意两台主机启动broker时后面的-c记得加载你配置好的配置文件路径，别加载错了</em></p><h2 id="搭建Console可视化控制台"><a href="#搭建Console可视化控制台" class="headerlink" title="搭建Console可视化控制台"></a>搭建Console可视化控制台</h2><p>  任意一台机器或者本地下载Console源码，地址：<a href="https://github.com/apache/rocketmq-externals，或者有git的话直接用命令拉取：" target="_blank" rel="noopener">https://github.com/apache/rocketmq-externals，或者有git的话直接用命令拉取：</a></p><pre class=" language-shell"><code class="language-shell"># git clone https://github.com/apache/rocketmq-externals.git</code></pre><p>进去目录：</p><pre class=" language-shell"><code class="language-shell"># cd rocketmq-externals-master/rocketmq-console</code></pre><p>修改配置文件：</p><pre class=" language-shell"><code class="language-shell"># vim src/main/resources/application.properties</code></pre><p>添加两个namesvr的主机ip</p><pre class=" language-properties"><code class="language-properties"><span class="token attr-name">rocketmq.config.namesrvAddr</span><span class="token punctuation">=</span><span class="token attr-value">172.16.54.128:9876;172.16.54.130:9876</span></code></pre><p>然后进项目跟目录，运行项目</p><pre class=" language-shell"><code class="language-shell"># mvn sprint-boot:run</code></pre><p>浏览器访问：</p><p><img src="https://mjava.top/img/rocketmq_console.png" alt="可视化Console界面"></p>]]></content>
      
      
      <categories>
          
          <category> technology </category>
          
          <category> learningExperience </category>
          
          <category> RocketMq </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> RocketMq </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue Cli3-11创建项目慢的问题</title>
      <link href="/2019/09/05/technology/dailyIssue/Vue/Cli3-11%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E6%85%A2%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/2019/09/05/technology/dailyIssue/Vue/Cli3-11%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E6%85%A2%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="Vue-Cli3-11创建项目慢的问题"><a href="#Vue-Cli3-11创建项目慢的问题" class="headerlink" title="Vue Cli3.11创建项目慢的问题"></a>Vue Cli3.11创建项目慢的问题</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>  这几天刚学习vue，于是下载了最新的vue cli3.11来搭建项目，可是搭建的时候一直卡在下载插件见面，就是下面这张图。</p><p><img src="/images/vuecreate.png" alt="vuecreate"></p><p>网上查了说不能用国内的镜像，WTF，不是说国内的更快吗？好吧，我换！！！</p><h2 id="下载nrm"><a href="#下载nrm" class="headerlink" title="下载nrm"></a>下载nrm</h2><p>  看清楚哦，是nrm部署npm！！！nrm 是一个 <code>npm</code> 源管理器，允许你快速地在 <code>npm</code> 源间切换。执行以下命令安装。</p><pre class=" language-shell"><code class="language-shell">sudo npm install -g nrm</code></pre><h3 id="测试nrm是否安装成功"><a href="#测试nrm是否安装成功" class="headerlink" title="测试nrm是否安装成功"></a>测试nrm是否安装成功</h3><pre class=" language-shell"><code class="language-shell">nrm -V</code></pre><p>如果输出版本号，则说明安装成功。</p><h2 id="切换npm源"><a href="#切换npm源" class="headerlink" title="切换npm源"></a>切换npm源</h2><pre class=" language-shell"><code class="language-shell">nrm ls</code></pre><p>此命令会列出npm的所有源</p><p><img src="/images/nrmls.png" alt="nrmls"></p><p>可以看到我现在使用的是淘宝的源，现在把他切换到npm的源。</p><pre class=" language-shell"><code class="language-shell">nrm use npm</code></pre><p><img src="/images/nrmuse.png" alt="nrmuse"></p><h2 id="再次创建vue项目"><a href="#再次创建vue项目" class="headerlink" title="再次创建vue项目"></a>再次创建vue项目</h2><pre class=" language-shell"><code class="language-shell">vue create rrr2</code></pre><p><img src="/images/vuecreate2.png" alt="vuecreate2"><br><img src="/images/vuecreate3.png" alt="vuecreate3"></p><p>项目成功创建！！！</p>]]></content>
      
      
      <categories>
          
          <category> technology </category>
          
          <category> dailyIssue </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日常踩坑 </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker下安装mysql并设置用户权限</title>
      <link href="/2019/09/03/technology/learningExperience/Linux/Docker/Docker%E4%B8%8B%E5%AE%89%E8%A3%85mysql%E5%B9%B6%E8%AE%BE%E7%BD%AE%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90/"/>
      <url>/2019/09/03/technology/learningExperience/Linux/Docker/Docker%E4%B8%8B%E5%AE%89%E8%A3%85mysql%E5%B9%B6%E8%AE%BE%E7%BD%AE%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90/</url>
      
        <content type="html"><![CDATA[<h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><ul><li><p>Ubuntu18.04</p></li><li><p>Docker19.03.1</p></li><li><p>Mysql5.7</p></li></ul><h2 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h2><h3 id="拉取镜像"><a href="#拉取镜像" class="headerlink" title="拉取镜像"></a>拉取镜像</h3><p>  Docker拉取镜像默认是从DockerHub上面拉取，上面有各厂商提供的优质官方镜像，可以直接拉取使用。或者也可以用DockerFile自定义构建你自己的镜像。</p><pre class=" language-shell"><code class="language-shell">sudo docker pull mysql:5.7            //拉取镜像到本地</code></pre><p>注：上面mysql:5.7指的是拉取5.7版本的mysql，如果不加直接写mysql的话默认是拉取mysql的最新版本。</p><p><img src="https://mjava.top/img/dockerpullmysql.png" alt="拉取镜像"></p><p>如果显示上面这样，说明已经拉取好了。</p><h3 id="查看镜像"><a href="#查看镜像" class="headerlink" title="查看镜像"></a>查看镜像</h3><pre class=" language-shell"><code class="language-shell">sudo docker images        //查看本地镜像</code></pre><p><img src="https://mjava.top/img/dockerimages.png" alt="查看本地镜像"></p><h3 id="创建容器"><a href="#创建容器" class="headerlink" title="创建容器"></a>创建容器</h3><h4 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h4><pre class=" language-shell"><code class="language-shell">sudo docker run -d -p 3306:3306 --name mysql5.7 -e MYSQL_ROOT_PASSWORD=root mysql:5.7</code></pre><ul><li>-d       指定容器运行于后台</li><li>-p       端口映射   主机端口:容器端口</li><li>–name    自定义容器名字，方便记忆，不设置的话会随机生产</li><li>-e        容器环境变量</li></ul><p><img src="https://mjava.top/img/dockerrun.png" alt="创建容器"></p><p>创建好的话会显示一串随机生产的id</p><h4 id="查看创建好的容器"><a href="#查看创建好的容器" class="headerlink" title="查看创建好的容器"></a>查看创建好的容器</h4><pre class=" language-shell"><code class="language-shell">sudo docker ps -a</code></pre><ul><li>-a        显示所有创建好的容器，如果不加只显示正在运行的容器</li></ul><p><img src="https://mjava.top/img/dockerps.png" alt="查看容器"></p><h2 id="Mysql"><a href="#Mysql" class="headerlink" title="Mysql"></a>Mysql</h2><h3 id="进入容器"><a href="#进入容器" class="headerlink" title="进入容器"></a>进入容器</h3><pre class=" language-shell"><code class="language-shell">sudo docker exec -it mysql5.7 bash</code></pre><ul><li>-i        打开STDIN，用于控制台交互</li><li>-t        分配tty设备，该可以支持终端登录</li></ul><p><img src="https://mjava.top/img/dockerexec.png" alt="进入容器"></p><h3 id="登录mysql"><a href="#登录mysql" class="headerlink" title="登录mysql"></a>登录mysql</h3><pre class=" language-shell"><code class="language-shell">mysql -uroot -p</code></pre><p>注：然后输入刚才创建容器时的密码，就是MYSQL_ROOT_PASSWORD这个参数</p><h3 id="创建测试数据库"><a href="#创建测试数据库" class="headerlink" title="创建测试数据库"></a>创建测试数据库</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">database</span> test<span class="token punctuation">;</span></code></pre><h3 id="创建mysql用户"><a href="#创建mysql用户" class="headerlink" title="创建mysql用户"></a>创建mysql用户</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">user</span> <span class="token string">'zmh'</span>@'<span class="token operator">%</span><span class="token string">' identified by '</span>zmh'<span class="token punctuation">;</span></code></pre><p>注：”%”表示可以任意ip访问</p><h3 id="切换mysql用户"><a href="#切换mysql用户" class="headerlink" title="切换mysql用户"></a>切换mysql用户</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">user</span> <span class="token string">'zmh'</span> identified <span class="token keyword">by</span> <span class="token string">'zmh'</span><span class="token punctuation">;</span></code></pre><h3 id="授权"><a href="#授权" class="headerlink" title="授权"></a>授权</h3><p>授权test库的所有表的所有权限给zmh用户</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">privileges</span> <span class="token keyword">on</span> test<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> <span class="token string">'zmh'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span></code></pre><h3 id="刷新权限"><a href="#刷新权限" class="headerlink" title="刷新权限"></a>刷新权限</h3><pre class=" language-sql"><code class="language-sql">flush <span class="token keyword">privileges</span><span class="token punctuation">;</span></code></pre><p>退出mysql命令行</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">exit</span></code></pre><h3 id="客户端连接测试"><a href="#客户端连接测试" class="headerlink" title="客户端连接测试"></a>客户端连接测试</h3><p><img src="https://mjava.top/img/sqlclient.png" alt="进入容器"></p><p>成功！</p><h2 id="附加"><a href="#附加" class="headerlink" title="附加"></a>附加</h2><p>如果要重启mysql的话，不用进容器里面，直接重启容器就可以</p><ul><li>sudo docker start mysql5.7       启动mysql5.7容器</li><li>sudo docker stop mysql5.7        停止mysql5.7容器</li><li>sudo docker restart mysql5.7   重启mysql5.7容器</li></ul>]]></content>
      
      
      <categories>
          
          <category> technology </category>
          
          <category> learningExperience </category>
          
          <category> Linux </category>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Docker </tag>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>树莓派安装docker</title>
      <link href="/2019/08/30/technology/learningExperience/Linux/%E6%A0%91%E8%8E%93%E6%B4%BE%E5%AE%89%E8%A3%85docker/"/>
      <url>/2019/08/30/technology/learningExperience/Linux/%E6%A0%91%E8%8E%93%E6%B4%BE%E5%AE%89%E8%A3%85docker/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>  和平常x86_64架构的电脑安装docker不同，树莓派是ARM架构的，所以安装步骤比较繁琐一点。</p><h2 id="使用APT源安装docker"><a href="#使用APT源安装docker" class="headerlink" title="使用APT源安装docker"></a>使用APT源安装docker</h2><p>  更新apt软件源及安装必备组件。为了确认所下载软件包的合法性，还需要添加软件源的 GPG 密钥。</p><pre class=" language-shell"><code class="language-shell">$sudo apt-get update$sudo apt-get install \     apt-transport-https \     ca-certificates \     curl \     gnupg2 \     lsb-release \     software-properties-common$curl -fsSL https://mirrors.ustc.edu.cn/docker-ce/linux/raspbian/gpg | sudo apt-key add -</code></pre><h2 id="添加docker-ce-软件源"><a href="#添加docker-ce-软件源" class="headerlink" title="添加docker ce 软件源"></a>添加docker ce 软件源</h2><ul><li><p>首先执行以下一行命令，然后记一下输出的结果</p><pre class=" language-shell"><code class="language-shell">$ echo $(lsb_release -cs)stretch</code></pre></li><li><p>在/etc/apt/sources.list.d目录下新建文件docker.list</p><pre class=" language-shell"><code class="language-shell">$ sudo vi /etc/apt/sources.list.d/docker.list</code></pre></li><li><p>在文件里添加下面这行</p><pre class=" language-shell"><code class="language-shell">deb [arch=armhf] https://download.docker.com/linux/raspbian $(lsb_release -cs) stable</code></pre></li><li><p>把$(lsb_release -cs)改为刚才第一行输出的结果，比如我的输出的是stretch，改完后如下</p><pre class=" language-shell"><code class="language-shell">deb [arch=armhf] https://download.docker.com/linux/raspbian stretch stable</code></pre></li><li><p>保存，退出</p></li></ul><h2 id="安装docker-ce"><a href="#安装docker-ce" class="headerlink" title="安装docker ce"></a>安装docker ce</h2><p>  依次执行以下两行命令，即可完成安装</p><pre class=" language-shell"><code class="language-shell">$ sudo apt-get update$ sudo apt-get install docker-ce</code></pre><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><pre class=" language-shell"><code class="language-shell">$ service docker start           启动$ service docker stop            停止$ service docker status          状态$ service docker restart         重启</code></pre>]]></content>
      
      
      <categories>
          
          <category> technology </category>
          
          <category> learningExperience </category>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Docker </tag>
            
            <tag> 树莓派 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDK时区问题</title>
      <link href="/2019/08/27/technology/dailyIssue/Linux/JDK%E6%97%B6%E5%8C%BA%E9%97%AE%E9%A2%98/"/>
      <url>/2019/08/27/technology/dailyIssue/Linux/JDK%E6%97%B6%E5%8C%BA%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>今天碰到一个大坑，弄了快一个小时才解决掉；</p><p>一个管理台后端服务，用docker隔离了三个容器，oracle,nginx,tomcat;后发现管理台查出来的时间和现实时间相差8个小时，一查是linux时区问题；</p><hr><ul><li>于是改之,三台容器都输入一下代码</li></ul><pre class=" language-shell"><code class="language-shell">cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</code></pre><p>测试了一下，发现问题docker容器的时区是正确了，可是问题并未得到解决，数据库时间还是慢了8个小时。</p><hr><ul><li>于是又查资料，换另外一种设置时区的方法；</li></ul><pre class=" language-shell"><code class="language-shell">vi /etc/sysconfig/clock</code></pre><p>在里面输入如下内容</p><pre class=" language-shell"><code class="language-shell">ZONE="Asia/Shanghai"UTC=falseARC=false</code></pre><p>保存，重启，测试。。。。。发现还是一样,快疯了</p><hr><ul><li>第三种方法，设置TZ环境变量</li></ul><blockquote><p>设置环境变量可以在设置系统级别的/etc/profile  ,也可以设置用户级别的home目录的.bashrc。由于用的是docker，防止变量重启失效，只能在.bashrc里设置。在.bashrc加入如下内容：</p></blockquote><pre class=" language-shell"><code class="language-shell">export TZ='CST-8'</code></pre><p>保存：然后执行</p><pre class=" language-shell"><code class="language-shell">source .bashrc</code></pre><p>使设置立即生效。</p><p>重启容器，测试，发现时间正常了。。。。哈哈哈哈</p><hr><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>上面问题出在jdk的new Date()方法，所以只要设置jdk所在的那个docker容器的变量就可以，不用每个都设置。jdk的new Date()方法每次调用都会去取环境变量TZ的时区，TZ是TimeZone的缩写，容器内部操作系统并未指定时区（TimeZone）信息，系统默认使用世界标准时（UTC+0),所以导致new Date()出来的数据存库会比当前时间慢8个小时；</p>]]></content>
      
      
      <categories>
          
          <category> technology </category>
          
          <category> dailyIssue </category>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java的==和equals</title>
      <link href="/2019/08/20/technology/learningExperience/Java/Java%E7%9A%84-%E5%92%8Cequals/"/>
      <url>/2019/08/20/technology/learningExperience/Java/Java%E7%9A%84-%E5%92%8Cequals/</url>
      
        <content type="html"><![CDATA[<p>在平常工作和学习中，我们一般用==和equals来比较两个对象或数据是否相等。但是什么时候用equals，什么时候用==一直都不怎么清楚，今天整理了下；</p><h2 id="首先看看Java的栈空间和堆空间的地址引用"><a href="#首先看看Java的栈空间和堆空间的地址引用" class="headerlink" title="首先看看Java的栈空间和堆空间的地址引用"></a>首先看看Java的栈空间和堆空间的地址引用</h2><p><img src="https://mjava.top/img/javaand1.png" alt="Java栈空间和堆空间"></p><h2 id="的说明"><a href="#的说明" class="headerlink" title="==的说明"></a>==的说明</h2><p>  在Java中，==对比的是两个对象在空间里的地址是否一致,比如上图的s2==s3返回的是false，s5==s6返回的是为true。话不多说，上代码。</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">demo2</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        String s1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">"t1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String s2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">"t2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String s3<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">"t2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String s4<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">"t3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String s5<span class="token operator">=</span><span class="token string">"t3"</span><span class="token punctuation">;</span>        String s6<span class="token operator">=</span><span class="token string">"t3"</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"s2==s3:"</span><span class="token operator">+</span><span class="token punctuation">(</span>s2<span class="token operator">==</span>s3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"s5==s6:"</span><span class="token operator">+</span><span class="token punctuation">(</span>s5<span class="token operator">==</span>s6<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>结果：<br><img src="https://mjava.top/img/javaand2.png" alt="控制台输出"></p><blockquote><p>这是因为==比的是在空间里的地址，s2和s3在堆里面是两个不同的对象，所以地址也不同，自然返回就是false。s5和s6是Java的基础数据类型，指向的是常量池里同一个引用，所以地址也相同，返回的就是true。</p></blockquote><h2 id="equals的说明"><a href="#equals的说明" class="headerlink" title="equals的说明"></a>equals的说明</h2><p>  每个Object里的equals都不一样，我们看看String里的源码</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span>Object anObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> anObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>anObject <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        String anotherString <span class="token operator">=</span> <span class="token punctuation">(</span>String<span class="token punctuation">)</span>anObject<span class="token punctuation">;</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> value<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> anotherString<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">char</span> v1<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>            <span class="token keyword">char</span> v2<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> anotherString<span class="token punctuation">.</span>value<span class="token punctuation">;</span>            <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>n<span class="token operator">--</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>v1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> v2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                i<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><ul><li>首先它会对比地址，如果地址相等，就直接返回true</li><li>如果地址不相等，就会对比里面的每一个字符，直到完全相等，然后返回true</li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>　　所以一般如果是对比两个对象是否相等的话，用==就可以。但是如果你要对比两个值是否相等的话，就要用equals了，因为如果用==就会出现上面明明值相等,返回却是false的情况。</p>]]></content>
      
      
      <categories>
          
          <category> technology </category>
          
          <category> learningExperience </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java中String判断为空的4大方法比较</title>
      <link href="/2019/08/20/technology/learningExperience/Java/Java%E4%B8%ADString%E5%88%A4%E6%96%AD%E4%B8%BA%E7%A9%BA%E7%9A%844%E5%A4%A7%E6%96%B9%E6%B3%95%E6%AF%94%E8%BE%83/"/>
      <url>/2019/08/20/technology/learningExperience/Java/Java%E4%B8%ADString%E5%88%A4%E6%96%AD%E4%B8%BA%E7%A9%BA%E7%9A%844%E5%A4%A7%E6%96%B9%E6%B3%95%E6%AF%94%E8%BE%83/</url>
      
        <content type="html"><![CDATA[<h2 id="一-四大方法"><a href="#一-四大方法" class="headerlink" title="一.四大方法"></a>一.四大方法</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">demo1</span> <span class="token punctuation">{</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>       String a<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">;</span>       String a2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token operator">==</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a2<span class="token operator">==</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token operator">==</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a2<span class="token operator">==</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a2<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="二-输出结果"><a href="#二-输出结果" class="headerlink" title="二.输出结果"></a>二.输出结果</h2><p><img src="https://mjava.top/img/javaands1.png" alt="控制台输出"></p><blockquote><p>可以看到用”==”判断的那组出现了不一致的情况</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> technology </category>
          
          <category> learningExperience </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Integer和int区别</title>
      <link href="/2019/08/19/technology/learningExperience/Java/Integer%E5%92%8Cint%E5%8C%BA%E5%88%AB/"/>
      <url>/2019/08/19/technology/learningExperience/Java/Integer%E5%92%8Cint%E5%8C%BA%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<h2 id="1-两者本质区别"><a href="#1-两者本质区别" class="headerlink" title="1.两者本质区别"></a>1.两者本质区别</h2><p>  int是Java的基础数据类型之一，而Integer是基于int进行封装的一个对象</p>]]></content>
      
      
      <categories>
          
          <category> technology </category>
          
          <category> learningExperience </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>递归算法-获取json中指定key的所有值</title>
      <link href="/2019/08/17/technology/algorithm/%E9%80%92%E5%BD%92%E7%AE%97%E6%B3%95-%E8%8E%B7%E5%8F%96json%E4%B8%AD%E6%8C%87%E5%AE%9Akey%E7%9A%84%E6%89%80%E6%9C%89%E5%80%BC/"/>
      <url>/2019/08/17/technology/algorithm/%E9%80%92%E5%BD%92%E7%AE%97%E6%B3%95-%E8%8E%B7%E5%8F%96json%E4%B8%AD%E6%8C%87%E5%AE%9Akey%E7%9A%84%E6%89%80%E6%9C%89%E5%80%BC/</url>
      
        <content type="html"><![CDATA[<p>今天在工作中遇到要解析json并获取json里所有指定key的值，再把key的值插入对应的数据映射表。于是写了一个递归算法来取值。</p><h2 id="1-首先导入alibaba的fastjson，用来解析json。当然也可以用其他的解析包"><a href="#1-首先导入alibaba的fastjson，用来解析json。当然也可以用其他的解析包" class="headerlink" title="1.首先导入alibaba的fastjson，用来解析json。当然也可以用其他的解析包"></a>1.首先导入alibaba的fastjson，用来解析json。当然也可以用其他的解析包</h2><pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span>dependency<span class="token operator">></span>    <span class="token operator">&lt;</span>groupId<span class="token operator">></span>com<span class="token punctuation">.</span>alibaba<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">></span>    <span class="token operator">&lt;</span>artifactId<span class="token operator">></span>fastjson<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">></span>    <span class="token operator">&lt;</span>version<span class="token operator">></span><span class="token number">1.2</span><span class="token punctuation">.</span><span class="token number">58</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">></span></code></pre><h2 id="2-创建两个工具类方法，用来判断传入的是不是json对象或json数组"><a href="#2-创建两个工具类方法，用来判断传入的是不是json对象或json数组" class="headerlink" title="2.创建两个工具类方法，用来判断传入的是不是json对象或json数组"></a>2.创建两个工具类方法，用来判断传入的是不是json对象或json数组</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">isJSONObj</span><span class="token punctuation">(</span>Object json<span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token keyword">return</span> json <span class="token keyword">instanceof</span> <span class="token class-name">JSONObject</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">isJSONArray</span><span class="token punctuation">(</span>Object json<span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token keyword">return</span> json <span class="token keyword">instanceof</span> <span class="token class-name">JSONArray</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><blockquote><p>java中的instanceof也称为类型比较运算符，因为它将实例与类型进行比较。它返回true或false。</p></blockquote><h2 id="3-建立核心重载方法"><a href="#3-建立核心重载方法" class="headerlink" title="3.建立核心重载方法"></a>3.建立核心重载方法</h2><pre class=" language-java"><code class="language-java">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">getJSONValue</span><span class="token punctuation">(</span>JSONObject json<span class="token punctuation">,</span>String k<span class="token punctuation">,</span>List<span class="token operator">&lt;</span>String<span class="token operator">></span> list<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>Object j<span class="token operator">:</span>json<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isJSONObj</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//是对象</span>                JSONObject j2<span class="token operator">=</span> JSON<span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">getJSONValue</span><span class="token punctuation">(</span>j2<span class="token punctuation">,</span>k<span class="token punctuation">,</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isJSONArray</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                JSONArray j3<span class="token operator">=</span>JSON<span class="token punctuation">.</span><span class="token function">parseArray</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">//是数组</span>                <span class="token function">getJSONValue</span><span class="token punctuation">(</span>j3<span class="token punctuation">,</span>k<span class="token punctuation">,</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>j<span class="token operator">==</span>k<span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//是字符串</span>                list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">getJSONValue</span><span class="token punctuation">(</span>JSONArray json<span class="token punctuation">,</span>String k<span class="token punctuation">,</span>List<span class="token operator">&lt;</span>String<span class="token operator">></span> list<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>Object j<span class="token operator">:</span>json<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isJSONObj</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//是对象</span>                JSONObject j2<span class="token operator">=</span> JSON<span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>j<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">getJSONValue</span><span class="token punctuation">(</span>j2<span class="token punctuation">,</span>k<span class="token punctuation">,</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isJSONArray</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//是数组</span>                JSONArray j3<span class="token operator">=</span>JSON<span class="token punctuation">.</span><span class="token function">parseArray</span><span class="token punctuation">(</span>j<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">getJSONValue</span><span class="token punctuation">(</span>j3<span class="token punctuation">,</span>k<span class="token punctuation">,</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h2 id="4-接下来写一个比较复杂的json，里面有对象嵌套数组的，数组嵌套对象的，数组嵌套数组的"><a href="#4-接下来写一个比较复杂的json，里面有对象嵌套数组的，数组嵌套对象的，数组嵌套数组的" class="headerlink" title="4.接下来写一个比较复杂的json，里面有对象嵌套数组的，数组嵌套对象的，数组嵌套数组的"></a>4.接下来写一个比较复杂的json，里面有对象嵌套数组的，数组嵌套对象的，数组嵌套数组的</h2><p><a href="https://mjava.top/img/demojson.txt">示例json</a></p><h2 id="5-调用方法"><a href="#5-调用方法" class="headerlink" title="5.调用方法"></a>5.调用方法</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">try</span> <span class="token punctuation">{</span>    File file<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>demo1<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">"/2.json"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    FileInputStream fileInputStream<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>    InputStreamReader inputStreamReader<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>fileInputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>    BufferedReader bufferedReader<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>inputStreamReader<span class="token punctuation">)</span><span class="token punctuation">;</span>    String line<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">;</span>    StringBuffer json<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line<span class="token operator">=</span>bufferedReader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>        json<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    JSONObject j3<span class="token operator">=</span>JSON<span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    List<span class="token operator">&lt;</span>String<span class="token operator">></span> mid<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">getJSONValue</span><span class="token punctuation">(</span>j3<span class="token punctuation">,</span><span class="token string">"interfaceId"</span><span class="token punctuation">,</span>mid<span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mid<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="6-成功获取"><a href="#6-成功获取" class="headerlink" title="6.成功获取"></a>6.成功获取</h2><p><img src="https://mjava.top/img/json2.png" alt="控制台返回"></p><blockquote><p>demo源码地址：<a href="https://github.com/z573419235/studyDemo" target="_blank" rel="noopener">https://github.com/z573419235/studyDemo</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> technology </category>
          
          <category> algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 递归 </tag>
            
            <tag> 算法 </tag>
            
            <tag> Json </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Base64影响泰文字段取值问题</title>
      <link href="/2019/08/14/technology/dailyIssue/Java/Base64%E5%BD%B1%E5%93%8D%E6%B3%B0%E6%96%87%E5%AD%97%E6%AE%B5%E5%8F%96%E5%80%BC%E9%97%AE%E9%A2%98/"/>
      <url>/2019/08/14/technology/dailyIssue/Java/Base64%E5%BD%B1%E5%93%8D%E6%B3%B0%E6%96%87%E5%AD%97%E6%AE%B5%E5%8F%96%E5%80%BC%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="今天在工作中，图片要用base64上传，上传数据中还有泰文，然后和前端app联调时发现他们传的泰文这边竟然没存到库里，怀疑是app没有传值过来，于是一番操作"><a href="#今天在工作中，图片要用base64上传，上传数据中还有泰文，然后和前端app联调时发现他们传的泰文这边竟然没存到库里，怀疑是app没有传值过来，于是一番操作" class="headerlink" title="今天在工作中，图片要用base64上传，上传数据中还有泰文，然后和前端app联调时发现他们传的泰文这边竟然没存到库里，怀疑是app没有传值过来，于是一番操作"></a>今天在工作中，图片要用base64上传，上传数据中还有泰文，然后和前端app联调时发现他们传的泰文这边竟然没存到库里，怀疑是app没有传值过来，于是一番操作</h2><h4 id="查看日志"><a href="#查看日志" class="headerlink" title="查看日志"></a>查看日志</h4><blockquote><p>what,日志里面竟然有他们传过来的泰文的值</p></blockquote><h4 id="对比ios和android的数据"><a href="#对比ios和android的数据" class="headerlink" title="对比ios和android的数据"></a>对比ios和android的数据</h4><blockquote><p>发现日志里的数据都是一样的，但是android上传的数据全部传入了mysql数据库，ios的除了泰文，其他的也都传到了库里</p></blockquote><h4 id="确定问题"><a href="#确定问题" class="headerlink" title="确定问题"></a>确定问题</h4><blockquote><p>最后对比发现，android的泰文字段三放在base64字段前面的然后传上来的，ios是放在base64字段后面传上来的，怀疑问题在此处</p></blockquote><h4 id="修复bug"><a href="#修复bug" class="headerlink" title="修复bug"></a>修复bug</h4><blockquote><p>于是叫ios也和android一样，把上传字段的顺序调整了以下，把泰文的字段放在base64字段前面，然后上传。改了之后试了以下，，竟然解决了，2222333333</p></blockquote><p>总结：暂时不知道具体什么原因，有可能是因为base64数据太长了，影响到泰文的字段存储了。</p>]]></content>
      
      
      <categories>
          
          <category> technology </category>
          
          <category> dailyIssue </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Base64 </tag>
            
            <tag> 日常踩坑 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
